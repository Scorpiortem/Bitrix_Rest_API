# Инструкция
Для начала нужно выполнить следующие шаги:
- Проверить, что все скрипты и файлы установлены в одну папку. Список файлов: `data_fetchers.py`, `dossier_generator.py`, `logger.py`, `processor.py`, `main.py`, `config.json`.
- Убедиться, что создано виртуальное оркужение и загружены нужные библиотеки, например, `requests`.
Переходим к работе с самой программой:
- Заходим в наше созданное вирутальное окружение
- Указываем переменную окружения. Если Вы работаете на Windows, то можно вписать команду как в PowerShell, так и в CMD, так как я работал в VS CODE и PowerShell, то поясню в этом случае для него. Нужно вписать команду `$env:BITRIX_TOKEN = "Жду токен!"`, заместо `Жду токен!` нужно вписать токен, полученный в Битрикс24, в моём случае это "4x25jen01cql0svt". Если вы работаете в Unix-подобных системах(Linux/macOS), то нужно выполнить следующие шаги:
```bash
export BITRIX_TOKEN="Какой-то там токен"
```
Такой метод подойдет для работы в одном терминале, но если нужно сделать переменную постоянной, то можно написать следующее, предварительно заменив `Какой-то там токен` на свой токен из Битрикс24, например, в **bash**:
```bash
echo 'export BITRIX_TOKEN="Какой-то там токен"' >> ~/.bashrc
source ~/.bashrc  #Применить изменения
```
- Запускаем скрипт. Делается это командой `python main.py --config config.json --output ./reports ID`. Сначала после `python` пишем название нашего основного скрипта, здесь это **main.py**, далее после `--config ` вписываем ссылку на JSON файл конфига, в котором указана ссылка на Битрикс24, уровень + путь логирования, после конфига идёт `--output` через пробел вписывается путь к папке, куда будут выгружаться репорты с каждой сделки, последним значением идёт `ID`, который будет меняться для каждой сделки (в моём случае это сделки 1, 3 и 5). Примерный вид команды: `python main.py --config config.json --output ./reports 3`
- Когда скрипт закончит работу в папке `./reports` появятся репорты в двух форматах: JSON и Markdown
- Также при окончании работы скрипта в папке `./logs` появится лог работы<br>
- [Документация по REST API Битрикс24](https://apidocs.bitrix24.ru/).
## Примеры
В папке `./reports` лежит несколько примеров сгенерированных файлов-отчётов в различных форматах.<br>
[Пример конфига](./config.json).